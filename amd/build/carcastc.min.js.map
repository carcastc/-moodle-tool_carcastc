{"version":3,"sources":["../src/carcastc.js"],"names":["SELECTORS","DELETE_ROW","confirmDelete","element","pendingPromise","Pending","Log","debug","href","component","then","strings","Notification","confirm","window","location","resolve","catch","exception","init","document","addEventListener","e","triggerElement","target","closest","preventDefault"],"mappings":"sMAuBA,OACA,OAEA,O,sDAEMA,CAAAA,CAAS,CAAG,CACdC,UAAU,CAAE,6BADE,C,CASZC,CAAa,CAAG,SAACC,CAAD,CAAa,CAC/B,GAAMC,CAAAA,CAAc,CAAG,GAAIC,UAAJ,CAAY,sCAAZ,CAAvB,CACAC,UAAIC,KAAJ,CAAUJ,CAAO,CAACK,IAAlB,EACA,kBAAW,CACP,CAAC,IAAO,SAAR,CADO,CAEP,CAAC,IAAO,kBAAR,CAA4BC,SAAS,CAAE,eAAvC,CAFO,CAGP,CAAC,IAAO,KAAR,CAHO,CAIP,CAAC,IAAO,IAAR,CAJO,CAAX,EAMKC,IANL,CAMU,SAAAC,CAAO,CAAI,CACb,MAAOC,WAAaC,OAAb,CAAqBF,CAAO,CAAC,CAAD,CAA5B,CAAiCA,CAAO,CAAC,CAAD,CAAxC,CAA6CA,CAAO,CAAC,CAAD,CAApD,CAAyDA,CAAO,CAAC,CAAD,CAAhE,CAAqE,UAAW,CACnFG,MAAM,CAACC,QAAP,CAAgBP,IAAhB,CAAuBL,CAAO,CAACK,IAClC,CAFM,CAGV,CAVL,EAWKE,IAXL,CAWUN,CAAc,CAACY,OAXzB,EAYKC,KAZL,CAYWL,UAAaM,SAZxB,CAaH,C,QAGmB,QAAPC,CAAAA,IAAO,EAAM,CAEtBC,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAAmC,SAAAC,CAAC,CAAI,CACpC,GAAMC,CAAAA,CAAc,CAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiBzB,CAAS,CAACC,UAA3B,CAAvB,CACA,GAAIsB,CAAJ,CAAoB,CAChBD,CAAC,CAACI,cAAF,GACAxB,CAAa,CAACqB,CAAD,CAChB,CAEJ,CAPD,CAQH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript module ES6 for tool_carcarstc\n *\n * @package    tool_carcastc\n * @copyright 2021, Carlos Castillo <carlos.castillo@moodle.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Notification from 'core/notification';\nimport Pending from \"core/pending\";\nimport {get_strings as getStrings} from \"core/str\";\nimport Log from \"core/log\";\n\nconst SELECTORS = {\n    DELETE_ROW: '[data-action=\"deleterow\"]',\n};\n\n/**\n * Display confirmation dialogue on delete row\n *\n * @param {Object} element\n */\nconst confirmDelete = (element) => {\n    const pendingPromise = new Pending('tool_carcastc/carcastc:confirmDelete');\n    Log.debug(element.href);\n    getStrings([\n        {'key': 'confirm'},\n        {'key': 'confirmdeleterow', component: 'tool_carcastc'},\n        {'key': 'yes'},\n        {'key': 'no'},\n    ])\n        .then(strings => {\n            return Notification.confirm(strings[0], strings[1], strings[2], strings[3], function() {\n                window.location.href = element.href;\n            });\n        })\n        .then(pendingPromise.resolve)\n        .catch(Notification.exception);\n};\n\n\nexport const init = () => {\n\n    document.addEventListener('click', e => {\n        const triggerElement = e.target.closest(SELECTORS.DELETE_ROW);\n        if (triggerElement) {\n            e.preventDefault();\n            confirmDelete(triggerElement);\n        }\n\n    });\n};"],"file":"carcastc.min.js"}